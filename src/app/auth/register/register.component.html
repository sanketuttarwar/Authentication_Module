<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-12 col-sm-8 col-md-8 col-lg-6 col-xl-6">
      <form
        class="form-container"
        [formGroup]="signupForm"
        (ngSubmit)="register()"
      >
        <h4 class="blockquote text-center"><u>SIGNUP</u></h4>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="signupFirstName">First Name</label>
            <input
              type="text"
              formControlName="signupFirstName"
              class="form-control"
              id="signupFirstName"
              [ngClass]="{
                'is-invalid':
                  signupForm.get('signupFirstName').errors != null &&
                  signupForm.get('signupFirstName').touched == true
              }"
            />
            <div
              *ngIf="
                signupForm.get('signupFirstName').errors != null &&
                signupForm.get('signupFirstName').touched == true
              "
              class="invalid-feedback"
            >
              Please provide a valid name.
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="signupMiddleName">Middle Name</label>
            <input
              type="text"
              formControlName="signupMiddleName"
              class="form-control"
              id="signupMiddleName"
              [ngClass]="{
                'is-invalid':
                  signupForm.get('signupMiddleName').errors != null &&
                  signupForm.get('signupMiddleName').touched == true
              }"
            />
            <div
              *ngIf="
                signupForm.get('signupMiddleName').errors != null &&
                signupForm.get('signupMiddleName').touched == true
              "
              class="invalid-feedback"
            >
              Please provide a valid name.
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="signupLastName">Last Name</label>
            <input
              type="text"
              formControlName="signupLastName"
              class="form-control"
              id="signupLastName"
              [ngClass]="{
                'is-invalid':
                  signupForm.get('signupLastName').errors != null &&
                  signupForm.get('signupLastName').touched == true
              }"
            />
            <div
              *ngIf="
                signupForm.get('signupLastName').errors != null &&
                signupForm.get('signupLastName').touched == true
              "
              class="invalid-feedback"
            >
              Please provide a valid name.
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="signupGender">Gender</label>
            <select
              id="signupGender"
              formControlName="signupGender"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  signupForm.get('signupGender').errors != null &&
                  signupForm.get('signupGender').touched == true
              }"
            >
              <option>Male</option>
              <option>Female</option>
            </select>
            <div
              *ngIf="
                signupForm.get('signupGender').errors != null &&
                signupForm.get('signupGender').touched == true
              "
              class="invalid-feedback"
            >
              Please choose a gender.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="signupMobile">Phone</label>
          <input
            type="number"
            formControlName="signupMobile"
            class="form-control"
            id="signupMobile"
            [ngClass]="{
              'is-invalid':
                signupForm.get('signupMobile').errors != null &&
                signupForm.get('signupMobile').touched == true
            }"
          />
          <div
            *ngIf="
              signupForm.get('signupMobile').errors != null &&
              signupForm.get('signupMobile').touched == true
            "
            class="invalid-feedback"
          >
            Please enter a valid mobile number.
          </div>
        </div>

        <div class="form-group">
          <label for="signupEmail">Email</label>
          <input
            type="email"
            formControlName="signupEmail"
            class="form-control"
            id="signupEmail"
            [ngClass]="{
              'is-invalid':
                signupForm.get('signupEmail').errors != null &&
                signupForm.get('signupEmail').touched == true
            }"
          />
          <div
            *ngIf="
              signupForm.get('signupEmail').errors != null &&
              signupForm.get('signupEmail').touched == true
            "
            class="invalid-feedback"
          >
            Please enter a valid email.
          </div>
        </div>

        <div formGroupName="passwords">
          <div class="form-group">
            <label for="signupPassword">Password</label>
            <input
              type="password"
              formControlName="signupPassword"
              class="form-control"
              id="signupPassword"
              [ngClass]="{
                'is-invalid':
                  signupForm.get('passwords.signupPassword').errors != null &&
                  signupForm.get('passwords.signupPassword').touched == true
              }"
              [ngClass]="{
                'is-invalid':
                  signupForm.get('passwords').errors != null &&
                  signupForm.get('passwords.signupPassword1').touched == true
              }"
            />
            <small id="emailHelp" class="form-text text-muted"
              >Password must contain atleat one lowercase, uppercase, number,
              special char and of min. 6 length.</small
            >
            <div
              *ngIf="
                signupForm.get('passwords.signupPassword').errors != null &&
                signupForm.get('passwords.signupPassword').touched == true
              "
              class="invalid-feedback"
            >
              Please enter a valid password.
            </div>
          </div>

          <div class="form-group">
            <label for="signupConfirmPassword">Retype Password</label>
            <input
              type="password"
              formControlName="signupConfirmPassword"
              class="form-control"
              id="signupConfirmPassword"
              required
              [ngClass]="{
                'is-invalid':
                  signupForm.get('passwords.signupConfirmPassword').errors !=
                    null &&
                  signupForm.get('passwords.signupConfirmPassword').touched ==
                    true
              }"
            />
            <div
              *ngIf="
                signupForm.get('passwords.signupConfirmPassword').errors != null
              "
              class="invalid-feedback"
            >
              Passwords don`t match.
            </div>
          </div>
        </div>
        <div
          *ngIf="errorMessage.length != 0"
          class="alert alert-danger"
          role="alert"
        >
          {{ errorMessage }}
        </div>
        <button
          type="submit"
          class="btn btn-primary mr-1"
          [disabled]="registerLoading"
        >
          <span
            *ngIf="registerLoading"
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
          ></span>

          Register
        </button>

        <button
          type="button"
          class="btn btn-danger"
          [disabled]="registerLoading"
          [routerLink]="['/']"
        >
          Cancel
        </button>
      </form>
    </div>
  </div>
</div>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Success</h4>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="alert alert-success" role="alert">
      Account Created Successfully !!!
    </div>
  </div>
</ng-template>
